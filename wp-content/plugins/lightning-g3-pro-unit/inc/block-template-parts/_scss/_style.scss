/******************************************************
 * Header Styles
 */

 // overflow をリセットしないと sticky が効かない
body.block-template-parts-header--sticky {
	overflow-x: unset;
}
// ヘッダーを固定する
body.block-template-parts-header--sticky .block-site-header {
	clear: both;
	z-index: 1000;
	position: sticky;
	top: 0px;
	left: 0;
}

/******************************************************
 * Navigation Styles
 */
 .wp-block-navigation {

	// Cope with mobile menu in align right
	&.items-justified-right {
		&> :where(button) {
			float: right;
		}
	}

	--submenu-icon-size: 10px;
	--nav-top-item-padding-horizontal: 0.9em;

	// 編集画面で a タグに下線がついてしまうので打ち消す
	.wp-block-navigation-item__content {
		text-decoration: none;
	}
	// サブメニューが第一階層の文字のすぐ下にひっつかないように
	&-item.wp-block-navigation-submenu {
		min-height:2.4em;
	}

	// PC Menu style
	&__responsive-container:where(:not(.has-modal-open)) {

		.wp-block-navigation__container>.wp-block-navigation-item {
			display: grid;
			position: relative;
			white-space: nowrap;

			&>a {
				grid-area: 1/-1;
			}

			*:where(:not(.is-style-nav--text-inline)) &.has-child>a {
				// Additional Padding for submenu-icon
				padding-right: 15px;
			}

			&>.wp-block-navigation__submenu-icon {
				grid-area: 1/-1;
				justify-self: end;
				width: var(--submenu-icon-size);
				height: var(--submenu-icon-size);
				display: block;

				&[aria-expanded=true] {
					svg {
						transform: rotate(180deg);
					}
				}
			}
		}

	}

	// Mobile menu open toggle button
	& &__responsive-container-open {
		border: 1px solid var(--wp--preset--color--text-normal);
		padding: 2px;
	}
}

/*
 * Sub Navigation Styles
 */
.wp-block-navigation:not(.has-background) .wp-block-navigation__submenu-container {
	border: none; // コアが border を付与してくるので打ち消す
}

.wp-block-navigation__responsive-container:not(.has-modal-open) {
	.wp-block-navigation__submenu-container {
		z-index: 99999; // .crolled-header-fixed specified z-index: 9999; so If less than 9999 that submenu loses to the fix header in the edit screen

		.wp-block-navigation-item {
			&:hover {
				background-color: var(--vk-color-primary-vivid);
			}

			&__content {
				font-size: var(--wp--preset--font-size--x-small);
				padding: 1em 1.5em;
			}
		}
	}
}

/******************************************************
 * Navigation Modal Styles
 */
 .has-modal-open {
	--wp--custom--spacing--menu-indent : 1em;
	--wp--preset--color--bg-light-gray : rgba( 0, 0, 0, 0.05 );
	:where(.wp-block-navigation__container, .wp-block-page-list) {
		--wp--style--block-gap: 0;
		gap:0 !important;
		&,
		li,
		li .wp-block-navigation-item__content {
			width: 100%;
			display: block;
			box-sizing: border-box;
		}

		li .wp-block-navigation-item__content {
			border-bottom: 1px solid rgba( 0, 0, 0, 0.05 );
		}

		li.has-child .wp-block-navigation__submenu-container {
			width: 100%;
		}

		.wp-block-navigation-item__content:hover {
			background-color: var(--wp--preset--color--bg-light-gray);
		}
	}

	.wp-block-navigation__responsive-container-close {
		margin:1.5em 0.5em;
	}
	.wp-block-navigation__responsive-container.is-menu-open .wp-block-navigation__responsive-container-content {
		.wp-block-navigation-item {
			.wp-block-navigation-item__content {
				padding: 1em;
				padding-left: var(--wp--custom--spacing--menu-indent);
			}

			li .wp-block-navigation-item__content {
				padding-left: calc(var(--wp--custom--spacing--menu-indent) * 2);
			}

			li li .wp-block-navigation-item__content {
				padding-left: calc(var(--wp--custom--spacing--menu-indent) * 3);
			}
		}

		:where(.wp-block-navigation__container, .wp-block-page-list) {

			.has-child .submenu-container,
			.has-child .wp-block-navigation__submenu-container {
				width: 100%;
				padding: 0;
			}
		}
	}
}